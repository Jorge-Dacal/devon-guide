:toc: macro 
toc::[]

= Deployment on Wildfly

Following describes the steps to install and configure Wilfly 10.x

. Download WildFly 10.x from http://wildfly.org/downloads/ 
. Place the extracted folder under {DISTRIBUTION_PATH}/software folder.
. Run console.bat under {DISTRIBUTION_PATH}.
. Navigate to path {DISTRIBUTION_PATH}/software/{extracted wildfly folder}/bin
. Run standalone.bat file.

image::images/devonfw-deployment/wildfly/tutorial_devon_standalone.PNG[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_standalone.PNG"]

It will start the administration console at http://localhost:9990/console. If the administration console asks for login credentials, provide "admin" as username and password.

Administration console is up and running at http://localhost:9990/console/App.html#home

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_console.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_console.png"]


To run .war file on Wildfly administration console, follow below steps:

* Click on start (highlighted in below screenshot)

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_console_start.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_console_start.png"]

* Click on Add button (highlighted in below screenshot)

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_console_Add.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_console_Add.png"]

* Upload new deployement.

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_UploadDeployement.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_UploadDeployement.png"]

* Choose .war file for the deployment.

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_choose_file.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_choose_file.png"]

* Verify upload and finish

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_verify_upload.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_verify_upload.png"]

* Successful deployment

image::images/devonfw-deployment/wildfly/tutorial_devon_administration_deployment_success.png[,width="450",link="images/devonfw-deployment/wildfly/tutorial_devon_administration_deployment_success.png"]


*Execute below mentioned steps to create .war file :*

.  start a new oasp4j project from the template
mvn -DarchetypeVersion=2.2.0 -DarchetypeGroupId=io.oasp.java.templates -DarchetypeArtifactId=oasp4j-template-server archetype:generate -DgroupId=io.oasp.application -DartifactId=sampleapp -Dversion=0.1-SNAPSHOT -Dpackage=io.oasp.application.sampleapp

. On SpringBootApp.java 
- Remove the exclude=xxxx option on the @SpringBootApplication annotation
- Remove the @EnableGlobalMethodSecurity annotation

. Remove the SpringBootBatchApp file.

. In pom.xml add

<dependency>
<groupId>org.apache.cxf</groupId>
<artifactId>cxf-spring-boot-starter-jaxrs</artifactId>
<version>3.1.10</version>
</dependency>
<dependency>
<groupId>javax.xml.ws</groupId>
<artifactId>jaxws-api</artifactId>
<version>2.2.11</version>
</dependency>

remove:
<!-- <dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-websocket</artifactId>
</dependency>
-->
<!-- 
<dependency>
<groupId>org.springframework.boot</groupId>
<artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
-->

change:
<dependency>
<groupId>org.springframework.boot</groupId>
<artifactId>spring-boot-starter-web</artifactId>
<exclusions>
<exclusion>
<groupId>org.apache.tomcat.embed</groupId>
<artifactId>tomcat-embed-websocket</artifactId>
</exclusion>
</exclusions>
</dependency>





