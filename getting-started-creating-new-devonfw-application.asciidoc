:toc: macro
toc::[]

= Creating a new application

== Running the archetype

In order to create a new application you must use the archetype provided by oasp4j who uses the maven archetype functionality.

To use the archetype provided by oasp4j you can choose between 2 alternatives, create it from command line or, in more visual manner, within eclipse.


=== From command Line

==== Step 1: Open the console

Open the Devonfw console by executing the batch file "console.bat" from the Devonfw distribution. This will open a command prompt preconfigured automatically to use the software and configuration provided by the Devonfw distribution.

==== Step 2: Change the directory

You can create the project wherever you want, but it is a good practice to create the projects into your workspace. So, in the console, change to the directory "workspaces\main".

[source,bash]
----
cd workspaces\main
----

This is the default location on Devonfw to create new applications. You can use your own workspaces if you have it.

==== Step 3: Create the new application

To create a new application you need to execute one of the following commands:


** WAR packaging (arguments before archetype:generate identify the OASP4J archetype):
+
[source,bash]
---- 
mvn -DarchetypeVersion=<OASP4J-VERSION> -DarchetypeGroupId=io.oasp.java.templates -DarchetypeArtifactId=oasp4j-template-server archetype:generate -DgroupId=<APPLICATION-GROUP-ID> -DartifactId=<APPLICATION-ARTIFACT-ID> -Dversion=<APPLICATION-VERSION> -Dpackage=<APPLICATION-PACKAGE-NAME>
---- 
+
For example 
+
[source,bash]
---- 
mvn -DarchetypeVersion=2.0.0 -DarchetypeGroupId=io.oasp.java.templates -DarchetypeArtifactId=oasp4j-template-server archetype:generate -DgroupId=io.oasp.application -DartifactId=sampleapp -Dversion=0.1-SNAPSHOT -Dpackage=io.oasp.application.sampleapp
---- 

** And for combined WAR and EAR packaging (arguments before archetype:generate identify the OASP4J archetype):
+
[source]
---- 
mvn -DarchetypeVersion=2.0.0 -DarchetypeGroupId=io.oasp.java.templates -DarchetypeArtifactId=oasp4j-template-server archetype:generate -DgroupId=io.oasp.application -DartifactId=sampleapp -Dversion=0.1-SNAPSHOT -Dpackage=io.oasp.application.sampleapp 
-DearProjectName=enterprise-ear
---- 

This will create a new directory inside `workspaces\main` with the name of your application with the created application inside.

=== From Eclipse

[NOTE]
====
If you use a proxy to connect to the Internet, the following will not work, as Eclipse has a known bug where the archetype discovery does not work behind a proxy. In this case, please use the command line version documented above.
====

To create a new application with Eclipse, you should have installed https://coconet.capgemini.com/sf/frs/do/listReleases/projects.apps2_devon/frs.devon_distribution[Devonfw distribution]. After that, you should follow this Eclipse steps to create your application:

==== Step 1 - Create a new Maven Project

Open Eclipse in of a Devonfw distribution, by executing the batch file "eclipse-main.bat", and go to File > New > Maven Project. If you don't see the option, click File > New > Other and use the filter to search the option Maven Project

==== Step 2 -  Choose the archetype

In the New Maven Project wizard you need to choose the oas4j-template-server archetype, just like the image.

image::images/create-new-app/devon-guide-newapp-choose-archetype.PNG[,scaledwidth=80%]

[Archetype]

==== Step 3 - Configure the application properties

Now you need to fill the Group Id, Artifact Id, Version and Package for your project. 

If you want to add an EAR generation mechanism to your project, you should fill the property earProjectName with the value Artifact Id + "-ear". 

For example, "sampleapp-ear". If you only want to WAR generation, you can remove the property earProjectName.

image::images/create-new-app/devon-guide-newapp-archetype-parameters.PNG[,scaledwidth=80%]
[EAR]

* Finish the Eclipse assistant and you are ready to start your project.

== What is generated

You can read more about the OASP4J application structure https://github.com/devonfw/devon-guide/wiki/getting-started-oasp-app-structure[here].