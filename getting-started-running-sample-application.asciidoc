= Sample Application

Devonfw comes with a sample application, which showcases the most common features of an OASP4J application and its proposed best practices. The sample application also serves as a final test to make sure that your environment is setup correctly. 

We are going to learn how download the sample application and how run it. The following steps assume that you have already setup your Devonfw environment.

= Downloading Sample Application

First of all, we need to download or clone the application from the https://github.com/oasp/oasp4j[GitHub repository]. We recommend to use the Git Bash to work with our repository of GitHub. You can download Git and Git Bash for Windows system https://git-for-windows.github.io/[here]. Also you can learn more about the best practices of work with Git and GitHub on Devonfw https://github.com/devonfw/devon/wiki/devon-guide-working-with-git-and-github[here].

To clone the repository we need to open the Git Bash and run the next command line:

[source,console]
----
git clone https://github.com/devonfw/devon.git
----

Now, we are going to run the Sample Application. 

= Running Sample Application

We have two ways to run the Sample Application or whatever other OASP4J application based on Spring boot: https://github.com/devonfw/devon-guide/wiki/getting-started-running-sample-application#embedded-tomcat-server[Running with the embedded Tomcat 8 server of Spring Boot] or https://github.com/devonfw/devon-guide/wiki/getting-started-running-sample-application#external-tomcat-server[using an external Tomcat 8 server].

== Embedded Tomcat server

All Spring boot application have their own embedded Tomcat server. This feature help us to deploy the application in the develop time without the need to create an server. To run the application with this mode you need to open Eclipse of your Devonfw distribution and follow this steps

=== Step 1: Import the project

First of all we need to import our Sample Application into our Eclipse following the next steps:

1. Open Eclipse by executing "eclipse-main.bat"

1. Select "File - Import"

1. Select "Maven - Existing Maven Projects"
+
image::images/running-sample-application/running_sample_application_1_import_maven_prject.png[,scaledWidth=50%]

1. Select the directory "workspaces/examples/oasp4j/samples
+
image::images/running-sample-application/running_sample_application_2_select_folder_oasp.png[,scaledWidth=50%]

1. Press "Finish"
+
image::images/running-sample-application/running_sample_application_3_import_maven.png[,scaledWidth=50%]

1. Wait for Eclipse to finish importing the sample project. This process might take several minutes, depending on the speed of your internet connection.

=== Step 2: Run the application

The embedded Tomcat server of the Spring Boot Application can be running wit a simple right click on the Java file *oasp4j-sample-core/src/main/java/io/oasp/gastronomy/restaurant/SpringBootApp.java* > Run as... > 2 Java Application

image::images/running-sample-application/running_sample_application_1_run_embedded_server.png[,scaledWidth=50%]

Now you can open you favorite browser and see the Sample Application running in the next URL  

[source]
----
http://localhost:8081/oasp4j-sample-server/
----

As you can see, this embedded server is a very comfortable way to start the application. When you run the application with this server, you need to take in to account that the application is useing the properties of the *src/main/resources/config* folder.

== External Tomcat server

Normally we want to deploy our application in a external server, so we can do this on Eclipse, creating a new server. The steps to run an OASP4J application in an external Tomcat server are the next:

=== Step 1: Create new Tomcat server

* Open the Server view in Eclipse if you don't have it opened (main menu -> Windows -> Show View -> Servers). 

* In servers view do right click -> New -> Server 

image::images/running-sample-application/running_sample_application_1_new_server.png[,scaledWidth=50%]

* In the wizard panel you need to configure the server as Tomcat 8 and press Next. 

image::images/running-sample-application/running_sample_application_2_new_server.png[,scaledWidth=50%]

It's possible that Eclipse ask you for the path of Tomcat 8. If you don't have Tomcat 8 in your distribution of Devonfw you can download it https://tomcat.apache.org/download-80.cgi[here] and extract the zip in the software folder of your distribution. 

=== Step 2: Add the application in the server

Now we need to go to the Server View and do right click in your new Tomcat 8 server -> Add and Remove... -> add the oasp4j-sample-server -> Finish.

image::images/running-sample-application/running_sample_application_3_new_server.png[,scaledWidth=50%]
  
=== Step 3: Run the server

Now we need to press Run or Debugg in the Server View with our new Tomcat server selected. And the application will be deployed by the server. 

image::images/running-sample-application/running_sample_application_4_new_server.png[,scaledWidth=50%]

Now you can open you favorite browser and see the Sample Application running in the next URL 

[source]
----
http://localhost:8080/oasp4j-sample-server/
----

As you can see the port is 8080, but you can modify this properties in the Tomcat server properties or in *src/main/resources/application.properties*. You need to keep into account that this are the properties that the application will use if you deploy the application in the context of an external Tomcat server.